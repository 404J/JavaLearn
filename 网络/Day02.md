# Day02

## 如何实现负载均衡
  
  > 四层负载均衡技术

  1. 添加一个负载均衡器: nginx
  2. 多个请求过来，由负载均衡器进行转发到多个server: Tomcat
  3. 同为应用层应用，nginx 为何比 Tomcat 可以处理更多的并发请求?
    1. Tomcat 和客户端进行通信需要经过七层，且 Tomcat 跑在 JVM 中
    2. Nginx 只进行数据包的转发，不需要进行七层，不会和客户端进行 ‘握手’

## NAT 网关地址转换

- 家用上网转换：私有地址通过路由器进行地址转换，源地址转换成公网地址，然后进行互联网通信，路由器接收到 response 后，路由器根据存储的 map 关系，返回给相关 客户端
- 负载均衡器转换：类似家用上网转换，但是不同于路由器，负载均衡器是非对称的 request 一般很小，response 很大，另外，还需地址转换

> DR(直接路由):优化负载均衡器转换中 response 过大问题：server 和 负载均衡器 的 IP 地址是同一个，但是 server 的 IP 不对外进行暴露，客户端请求到负载均衡器，报文中添加 server 的 MAC 地址，server 接收到后，直接返回到客户端
